@page "/"
@inject ContextMenuService ContextMenuService
@inject DialogService DialogService
@using System
@using System.IO
@using ParaglidingFlightLogWeb.Components.Subs
@using Microsoft.AspNetCore.Hosting
@using Microsoft.Extensions.Logging
@inject IWebHostEnvironment Environment
@inject ILogger<Index> _logger
@using ParaglidingFlightLogWeb.ViewModels


@rendermode InteractiveServer

<PageTitle>Paraglidier Flight Log</PageTitle>

<RadzenText TextStyle="TextStyle.H3" Text="Welcome on the Paraglider Flight Log" />

<AuthorizeView>
    <Authorized>
        <RadzenRow>
            <RadzenColumn SizeSM="6">
                <RadzenCard>
                    <RadzenText TextStyle="TextStyle.H4" Text="Interesting facts" />
                    
                    <RadzenRow>
                        <RadzenColumn>
                            <MyNumericIndicator Format="F0" Label="Number of sites during the last year" Value="@FlightStatisticService.LastYearSiteCount" />
                        </RadzenColumn>
                        <RadzenColumn>
                            <MyTextIndicator Label="Glider with the oldest last check" Text="@($"{FlightStatisticService.OldestCheckUsedGlider?.FullName} ({FlightStatisticService.OldestCheckUsedGlider?.LastCheckDateTime.ToString("d")} with {FlightStatisticService.OldestCheckUsedGlider?.FlightTimeSinceLastCheck} flight hours)")" />
                        </RadzenColumn>
                    </RadzenRow>
                </RadzenCard>
            </RadzenColumn>
            <RadzenColumn SizeSM="6">
                <RadzenCard>

                </RadzenCard>
            </RadzenColumn>
        </RadzenRow>
        <RadzenRow>
            <RadzenColumn SizeSM="6">
                <RadzenCard>

                </RadzenCard>
            </RadzenColumn>
            <RadzenColumn SizeSM="6">
                <RadzenCard>

                </RadzenCard>
            </RadzenColumn>
        </RadzenRow>
    </Authorized>
    <NotAuthorized>
        <RadzenText TextStyle="TextStyle.Body1">
            You are currently not log in please <RadzenLink Path="/Account/Login">log in</RadzenLink>
        </RadzenText>
    </NotAuthorized>
</AuthorizeView>

